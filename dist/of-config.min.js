var AppState=function(){function t(){}return t}(),LanguageConfig=function(){function t(){this.localizationPrefix="localization/",this.localizationSuffix=".json",this.storageKey="language",this.lang=void 0}return t}(),StatesConfig=function(){function t(){}return t}(),SettingsConfig=function(){function t(){}return t}(),UiGroup=function(){function t(){}return t}(),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),UiOption=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppState),MenuOptionType;!function(t){t[t.Action=1]="Action",t[t.Url=2]="Url",t[t.State=3]="State"}(MenuOptionType||(MenuOptionType={}));var OfConfigService=function(){function t(t,e,n,o,i,r){var s=this;this.$http=t,this.$log=e,this.$translate=n,this.settingsConfig=o,this.statesConfig=i,this.languageConfig=r,this.settings={},this.states=[],this.MODULE="of.config",this.loadSettings().then(function(t){return s.loadStates()}).then(function(t){return s.loadLanguage()}).catch(function(t){e.error(t)})}return t.prototype.loadSettings=function(){var t=this;if(this.$log.debug(this.MODULE+" - cargando configuraci贸n"),!this.settingsConfig||!this.settingsConfig.endpoint)return this.$log.info(this.MODULE+" - no se especifica endpoint para configuraci贸n"),null;var e=this.$http.get(this.settingsConfig.endpoint);return e.then(function(e){return t.$log.debug(t.MODULE+" - configuraci贸n cargada",e.data),t.settings=angular.extend(t.settings,e.data),t.settingsConfig.observers&&t.settingsConfig.observers.forEach(function(n){try{n(e.data)}catch(e){t.$log.error(e)}}),e.data}),e},t.prototype.loadLanguage=function(){this.$log.debug(this.MODULE+" - cargando lenguage"),this.languageConfig?(this.setLanguage(this.getLanguage()),this.$log.debug(this.MODULE+" - lenguaje cargado",this.languageConfig)):this.$log.info(this.MODULE+" - no se especifica configuraci贸n para lenguaje")},t.prototype.loadStates=function(){var t=this;if(this.$log.debug(this.MODULE+" - cargando estados"),!this.statesConfig||!this.statesConfig.endpoint)return this.$log.info(this.MODULE+" - no se especifica endpoint para estados"),null;var e=this.$http.get(this.statesConfig.endpoint);return e.then(function(e){return t.$log.debug(t.MODULE+" - estados cargados",e.data),t.states=angular.extend(t.states,e.data),t.statesConfig.observers&&t.statesConfig.observers.forEach(function(n){try{n(e.data)}catch(e){t.$log.error(e)}}),e.data}),e},t.prototype.getLanguage=function(){return this.languageConfig.storage.getItem(this.languageConfig.storageKey)||this.languageConfig.lang},t.prototype.setLanguage=function(t){this.languageConfig.lang=t,this.languageConfig.storage.setItem(this.languageConfig.storageKey,t),this.$translate.use(t)},t}(),OfConfigServiceProvider=function(){function t(t){var e=this;this.$translateProvider=t,this.$get=["$http","$log","$translate",function(t,n,o){var i=new SettingsConfig;i.endpoint=e.settingsEndpoint,i.observers=e.settingsObservers;var r=new StatesConfig;return r.endpoint=e.statesEndpoint,r.observers=e.statesObservers,new OfConfigService(t,n,o,i,r,e.languageConfig)}],this.settingsObservers=[],this.statesObservers=[],this.MODULE="of.config"}return t.prototype.configureSettings=function(t){console.debug(this.MODULE+" - configurando settings",t),this.settingsEndpoint=t},t.prototype.configureStates=function(t){console.debug(this.MODULE+" - configurando estados",t),this.statesEndpoint=t},t.prototype.configureLanguage=function(t){console.debug(this.MODULE+" - configurando lenguaje",t),this.languageConfig=t,this.$translateProvider.useStaticFilesLoader({prefix:t.localizationPrefix,suffix:t.localizationSuffix}),this.$translateProvider.useSanitizeValueStrategy("escape"),t.lang||(t.lang=(navigator.language||navigator.userLanguage).split("-")[0]),this.$translateProvider.preferredLanguage(t.lang)},t}();OfConfigServiceProvider.$inject=["$translateProvider"];var OfHttpService=function(){function t(t,e,n){this.$http=t,this.$httpParamSerializer=e,this.$log=n}return t.prototype.findAll=function(){return this.$http.get(this.baseUri+this.resourcePath)},t.prototype.create=function(t){return this.$http.post(this.baseUri+this.resourcePath,t)},t.prototype.findOne=function(t){return this.$http.get(this.baseUri+this.resourcePath+t)},t.prototype.update=function(t,e){return this.$http.put(this.baseUri+this.resourcePath+t,e)},t.prototype.delete=function(t){return this.$http.delete(this.baseUri+this.resourcePath+t)},t.prototype.toObject=function(t){var e={};return t.forEach(function(t){e[t.id.toLowerCase()]=t.value}),e},t}();OfHttpService.$inject=["$http","$httpParamSerializer","$log","Settings"];var OfLocalStorageService=function(){function t(){}return t.prototype.setItem=function(t,e){null!=e?localStorage.setItem(t,JSON.stringify(e)):localStorage.removeItem(t)},t.prototype.getItem=function(t){var e=localStorage.getItem(t);return JSON.parse(e)},t.prototype.removeItem=function(t){localStorage.removeItem(t)},t}(),OfSessionStorageService=function(){function t(){}return t.prototype.setItem=function(t,e){null!=e?sessionStorage.setItem(t,JSON.stringify(e)):sessionStorage.removeItem(t)},t.prototype.getItem=function(t){var e=sessionStorage.getItem(t);return JSON.parse(e)},t.prototype.removeItem=function(t){sessionStorage.removeItem(t)},t}(),Component=function(){function t(){this.bindings={},this.transclude=!1}return t}(),ComponentController=function(){function t(){this.ui={}}return t}(),DefaultController=function(){function t(t,e,n){this.$scope=t,this.$state=e,this.$config=n,console.log(e.current),console.log(n.settings)}return t}();DefaultController.$inject=["$scope","$state","OfConfigService"],function(t){function e(t,e){t.deferIntercept(),t.otherwise("/home"),e.statesObservers.push(function(t){i&&i(t)})}function n(t,e,n,r){function s(i){i.forEach(function(e){var i=e,s={abstract:i.abstract,controller:i.controller||DefaultController,data:i.data,name:i.name,parent:i.parent,templateUrl:r.settings.pagesPath+i.templateUrl,url:i.url};try{n.stateRegistry.register(s)}catch(e){throw t.error(o+" - error registrando estado",i),e}}),e.sync(),e.listen()}i=s}var o="of.config";t.module(o,["pascalprecht.translate","ui.router"]),t.module(o).config(["$urlRouterProvider","OfConfigServiceProvider",e]),t.module(o).run(["$log","$urlRouter","$uiRouter","OfConfigService",n]),t.module(o).service("OfHttpService",OfHttpService),t.module(o).service("OfStorageService",OfLocalStorageService),t.module(o).provider("OfConfigService",OfConfigServiceProvider);var i}(window.angular);